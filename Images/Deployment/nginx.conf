worker_processes auto;

events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    resolver 127.0.0.11 valid=30s;
     resolver_timeout 5s;

    sendfile        on;
    keepalive_timeout 65;
    access_log /var/log/nginx/access.log;
    error_log  /var/log/nginx/error.log;

    upstream app_servers {
        server tasks.ecommerce_stack_app:9000;
    }

    server {
        listen 80;
        server_name 147.93.104.239;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name allairx.com www.allairx.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name allairx.com www.allairx.com;

        ssl_certificate /etc/nginx/ssl/allairx.com.crt;
        ssl_certificate_key /etc/nginx/ssl/allairx.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site1.com www.site1.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site1.com www.site1.com;

        ssl_certificate /etc/nginx/ssl/site1.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site1.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site2.com www.site2.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site2.com www.site2.com;

        ssl_certificate /etc/nginx/ssl/site2.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site2.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site3.com www.site3.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site3.com www.site3.com;

        ssl_certificate /etc/nginx/ssl/site3.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site3.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site4.com www.site4.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site4.com www.site4.com;

        ssl_certificate /etc/nginx/ssl/site4.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site4.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site5.com www.site5.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site5.com www.site5.com;

        ssl_certificate /etc/nginx/ssl/site5.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site5.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site6.com www.site6.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site6.com www.site6.com;

        ssl_certificate /etc/nginx/ssl/site6.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site6.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site7.com www.site7.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site7.com www.site7.com;

        ssl_certificate /etc/nginx/ssl/site7.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site7.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site8.com www.site8.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site8.com www.site8.com;

        ssl_certificate /etc/nginx/ssl/site8.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site8.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site9.com www.site9.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site9.com www.site9.com;

        ssl_certificate /etc/nginx/ssl/site9.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site9.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site10.com www.site10.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site10.com www.site10.com;

        ssl_certificate /etc/nginx/ssl/site10.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site10.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site11.com www.site11.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site11.com www.site11.com;

        ssl_certificate /etc/nginx/ssl/site11.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site11.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site12.com www.site12.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site12.com www.site12.com;

        ssl_certificate /etc/nginx/ssl/site12.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site12.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site13.com www.site13.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site13.com www.site13.com;

        ssl_certificate /etc/nginx/ssl/site13.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site13.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site14.com www.site14.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site14.com www.site14.com;

        ssl_certificate /etc/nginx/ssl/site14.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site14.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site15.com www.site15.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site15.com www.site15.com;

        ssl_certificate /etc/nginx/ssl/site15.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site15.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site16.com www.site16.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site16.com www.site16.com;

        ssl_certificate /etc/nginx/ssl/site16.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site16.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site17.com www.site17.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site17.com www.site17.com;

        ssl_certificate /etc/nginx/ssl/site17.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site17.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

    server {
        listen 80;
        server_name site18.com www.site18.com;
        return 301 https://$host$request_uri;
    }

    server {
        listen 443 ssl;
        server_name site18.com www.site18.com;

        ssl_certificate /etc/nginx/ssl/site18.com.crt;
        ssl_certificate_key /etc/nginx/ssl/site18.com.key;

        root /var/www/html/public;
        index index.php index.html;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }

        location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            try_files $uri =404;
            expires max;
            log_not_found off;
            access_log off;
        }

        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_pass app_servers;
        }

        error_page 404 /index.php;
    }

}